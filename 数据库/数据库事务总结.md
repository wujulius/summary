## 事务的概述
    事务是一系列对数据库中数据进行更新和删除操作组成的一个程序执行逻辑单元
## 事务的四大特性：
    原子性，是一个原子的操作序列单元，一个事务要么全部执行，要么全部失败
    一致性，数据的总量保持一致
    隔离性， 数据库具有并发的特点：多个线程操作一个事务的操作不会受到另一个事务的影响
        指的通过设置相关的隔离级别，保证一个事务操作不影响另一个事务
    持久性，数据的改变是永久性的，被永久保存
    
## 事务的读写问题
### 读问题：(三种)

    脏读：
        一个事务读取到另一个事务未提交的数据
    不可重复读：
        一个事务读取到另一个事务已经提交的数据（读取了另一个事务更改的数据）
    幻读:
        一个事务在读取另一个事务的数据时，另一个事务插入（删除）了数据（读取了另一个事务新增或删除的数据）

    不可重复读和幻读的区别：
            不可重复读主要发生在update操作期间，幻读主要发生在insert和delete操作期间
            不可重复读的指两次查询出来的结果不一致
            幻读是指两次查询出来的结果的条数不一致
        解决方式：
            不可重复读采用行级锁的机制：锁定该行，读取多次之后，才允许其他事务更新刚才数据
            幻读采用表级锁的机制：锁定该表，读取多次数据总量之后，才允许其他事务添加或删除数据
        

### 写问题

    死锁
        每一个事务都持有另一个事务所需要的锁，所有事务都让对方等待，不会释放自己的锁，造成所有事务都不能执行
## 事务的隔离级别（isolation）（四种）
    1.读未提交（read uncommited）（未解决任何问题）
    2.读已提交（read commited）（解决脏读问题）
    3.可重复读（repeatable）（解决脏读和不可重复读问题）
    4.串行化（serialize）（解决所有问题）
### 设置隔离级别的原因：
    每个线程可能都会开启一个事务，多个事务可能会并发的对缓存里的同一批数据进行更新和删除操作，于是这个并发问题增删改操作同一数据，可能会造成脏读，不可重复读以及幻读问题，因而需要使用事务隔离机制来解决多事务并发问题
### 默认隔离级别:
    mysql事务隔离级别：可重复读
    spring事务隔离级别有五种:
        添加了一种default（默认使用后端数据库的默认隔离级别）
    oracle事务隔离级别:read commited
## 事务的传播
    二、事务的7种传播行为
    Spring在TransactionDefinition接口中规定了7种类型的事务传播行为。
    事务传播行为是Spring框架独有的事务增强特性。
    7种：(required / supports / mandatory / requires_new / not supported / never / nested)

    PROPAGATION_REQUIRED：如果当前没有事务，就创建一个新事务，如果当前存在事务，就加入该事务，这是最常见的选择，也是Spring默认的事务传播行为。(required需要，没有新建，有加入)
    PROPAGATION_SUPPORTS：支持当前事务，如果当前存在事务，就加入该事务，如果当前不存在事务，就以非事务执行。（supports支持，有则加入，没有就不管了，非事务运行）
    PROPAGATION_MANDATORY：支持当前事务，如果当前存在事务，就加入该事务，如果当前不存在事务，就抛出异常。（mandatory强制性，有则加入，没有异常）
    PROPAGATION_REQUIRES_NEW：创建新事务，无论当前存不存在事务，都创建新事务。（requires_new需要新的，不管有没有，直接创建新事务）
    PROPAGATION_NOT_SUPPORTED：以非事务方式执行操作，如果当前存在事务，就把当前事务挂起。（not supported不支持事务，存在就挂起）
    PROPAGATION_NEVER：以非事务方式执行，如果当前存在事务，则抛出异常。（never不支持事务，存在就异常）
    PROPAGATION_NESTED：如果当前存在事务，则在嵌套事务内执行。如果当前没有事务，则按REQUIRED属性执行。（nested存在就在嵌套的执行，没有就找是否存在外面的事务，有则加入，没有则新建）
    对事务的要求程度可以从大到小排序：mandatory / supports / required / requires_new / nested / not supported / never